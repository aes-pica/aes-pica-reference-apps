<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:camel="http://camel.apache.org/schema/spring"
	xmlns:cxf="http://camel.apache.org/schema/cxf"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
	http://camel.apache.org/schema/cxf http://camel.apache.org/schema/cxf/camel-cxf.xsd
	http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd        
	http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">


	<!-- ================================================================= -->
	<!-- CANONICAL ADAPTER -->
	<!-- ================================================================= -->

	<camel:routeContext id="adaptadores-canonicos-route-context">

		<camel:route id="adaptador-canonico-sms">
			<camel:from uri="direct:adaptador-canonico-sms" />
			<camel:log message="Reciviendo solicitud de procesamiento en adaptador-canonico-sms con mensaje: ${body}" />
			<camel:to uri="xslt:spring/routes-adaptadores-canonicos/xslt/sms-transformer.xsl" />
			<camel:log message="Resultado de la transformacion: ${body}" />
			
			<camel:removeHeaders pattern="*"/>
			
			<camel:setHeader headerName="SOAPAction">
    			<camel:simple>http://claro.com.co/publicaciones/publicador-sms/publicar</camel:simple>
			</camel:setHeader>
			
			<camel:to uri="cxf:bean:smsSoapClient?dataFormat=PAYLOAD" />
		</camel:route>
		
		
		<camel:route id="adaptador-canonico-mainframe-tcpip">
			<camel:from uri="direct:adaptador-canonico-mainframe-tcpip" />
			<camel:log message="Reciviendo solicitud de procesamiento en adaptador-canonico-mainframe-tcpip con mensaje: ${body}" />
			<camel:to uri="bean:composicionPocSmsController?method=transformarATrama"/>
			<camel:to uri="netty4:tcp://localhost:4700?textline=true&amp;sync=true" />
			<camel:log message="Resultado del endpoint tcp-ip con mensaje: ${body}" />
		</camel:route>

	</camel:routeContext>
	

</beans>